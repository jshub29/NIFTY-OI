<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nifty OI Dashboard</title>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
  <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
  <style>
    :root{--bg:#071029;--card:rgba(255,255,255,0.02);--muted:#94a3b8;--accent:#06b6d4}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
    body{background:linear-gradient(180deg,#071029 0%, #071730 100%);color:#e6eef8}
    .container{max-width:1200px;margin:18px auto;padding:18px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between}
    h1{margin:0;font-size:18px}
    .controls{display:flex;gap:8px;align-items:center}
    input,select,button{padding:8px 10px;border-radius:8px;border:0;background:#071e2a;color:inherit}
    .btn{background:var(--accent);color:#012;cursor:pointer}
    .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:18px}
    @media(min-width:980px){.grid{grid-template-columns:1fr 420px}}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .muted{color:var(--muted)}
    table{width:100%;border-collapse:collapse;color:var(--muted);font-size:13px}
    th,td{padding:6px 8px;text-align:left;border-bottom:1px solid rgba(255,255,255,0.03)}
    footer{margin-top:18px;color:var(--muted);font-size:13px}
    .slot-title{font-size:13px;color:#cfe8f0;margin-bottom:6px}
    .chart-slot{height:320px}
    .table-slot{max-height:260px;overflow:auto}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div>
        <h1>Nifty Options — OI Dashboard</h1>
        <div class="muted">Placeholders ready for 3 charts & 3 tables — connect CSVs or API next</div>
      </div>
      <div class="controls">
        <label class="muted">Date</label>
        <input id="date" type="date" />
        <button id="refresh" class="btn">Refresh</button>
      </div>
    </header>

    <!-- MAIN GRID: left large column, right sidebar -->
    <div class="grid">
      <div class="card">
        <!-- Top: three charts in a row (responsive stacks on narrow screens) -->
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px">
          <div>
            <div class="slot-title">Chart 1 — Net Positioning (time series)</div>
            <div id="chart-1" class="chart-slot card"></div>
          </div>
          <div>
            <div class="slot-title">Chart 2 — Call/Put OI Change (%)</div>
            <div id="chart-2" class="chart-slot card"></div>
          </div>
          <div>
            <div class="slot-title">Chart 3 — PCR / OICR / ATM PCR</div>
            <div id="chart-3" class="chart-slot card"></div>
          </div>
        </div>

        <!-- Spacer -->
        <div style="height:12px"></div>

        <!-- Three tables stacked vertically (Table A, Table B (9-strike), Table C) -->
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:12px">
          <div class="card table-slot" id="table-a-card">
            <div class="slot-title">Table A — Top strikes summary</div>
            <div id="table-a"></div>
          </div>

          <div class="card table-slot" id="table-b-card">
            <div class="slot-title">Table B — 9-strike summary (ATM ±4)</div>
            <div id="table-b"></div>
          </div>

          <div class="card table-slot" id="table-c-card">
            <div class="slot-title">Table C — Recent time-series snapshot</div>
            <div id="table-c"></div>
          </div>
        </div>

      </div>

      <!-- RIGHT SIDEBAR: additional info + full strikes table -->
      <div class="card">
        <div class="slot-title">Full Strikes (paged)</div>
        <div id="strike-table-container" class="table-slot"></div>
        <div style="height:10px"></div>
        <div class="small muted">Use the Refresh button to reload CSVs. Next: wire data source (CSV/Raw URL) or I can add GitHub Actions to auto-update.</div>
      </div>
    </div>

    <footer>
      Built for GitHub Pages — static dashboard (Plotly). 
    </footer>
  </div>

<script>
// placeholder JS: basic wiring to demonstrate slots exist
function emptyTableHtml(title){
  return `<div style="padding:8px;color:var(--muted)">No data yet. Will render ${title} here.</div>`;
}

function placeholderChart(elId, text){
  const el = document.getElementById(elId);
  el.innerHTML = '';
  var gd = document.createElement('div'); gd.style.height='100%'; el.appendChild(gd);
  var trace = [{x:[0,1], y:[0,0], mode:'lines', line:{dash:'dash'}, name:text}];
  Plotly.newPlot(gd, trace, {margin:{t:10,l:40,r:20,b:30}, xaxis:{visible:false}, yaxis:{visible:false}});
}

function renderPlaceholders(){
  // Charts
  placeholderChart('chart-1','Net Positioning');
  placeholderChart('chart-2','Call/Put % Change');
  placeholderChart('chart-3','PCR / OICR');
  // Tables
  document.getElementById('table-a').innerHTML = emptyTableHtml('Table A');
  document.getElementById('table-b').innerHTML = emptyTableHtml('Table B (9-strike)');
  document.getElementById('table-c').innerHTML = emptyTableHtml('Table C');
  document.getElementById('strike-table-container').innerHTML = emptyTableHtml('Full strikes');
}

// Wire refresh button
document.getElementById('refresh').addEventListener('click', function(){ renderPlaceholders(); });
// auto-run on load
window.addEventListener('load', function(){ document.getElementById('date').value = new Date().toISOString().slice(0,10); renderPlaceholders(); });
</script>
</body>
</html>
